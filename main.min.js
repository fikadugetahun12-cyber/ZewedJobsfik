const ZewedJobs=(()=>{const e={init(){this.initMobileMenu(),this.initFilters(),this.initModals(),this.initSearch(),this.loadFeaturedJobs(),this.loadJobCategories(),this.loadTrendingSearches(),this.checkAuthStatus()},initMobileMenu(){const e=document.getElementById("mobileMenuBtn"),t=document.getElementById("navButtons");e&&t&&(e.addEventListener("click",()=>{t.classList.toggle("active");const e=t.querySelector("i");t.classList.contains("active")?e.className="fas fa-times":e.className="fas fa-bars"}),document.addEventListener("click",e=>{e.target.closest(".nav-buttons")||e.target.closest(".mobile-menu-btn")||(t.classList.remove("active"),e.querySelector("i").className="fas fa-bars")}))},initFilters(){document.querySelectorAll(".filter-option").forEach(e=>{e.addEventListener("click",function(){this.classList.toggle("active")})});const e=document.querySelector(".filter-toggle"),t=document.getElementById("advancedFilters");e&&t&&e.addEventListener("click",()=>{t.classList.toggle("active");const e=t.querySelector("i");t.classList.contains("active")?(e.className="fas fa-times",e.innerHTML='<i class="fas fa-times"></i> Close Filters'):(e.className="fas fa-filter",e.innerHTML='<i class="fas fa-filter"></i> Advanced Filters')})},applyFilters(){const e={location:[],experience:[],salaryRange:document.getElementById("salaryRange").value,postedDate:document.getElementById("postedDate").value};document.querySelectorAll(".filter-option.active").forEach(t=>{const n=t.dataset.filterType,o=t.dataset.filterValue;n&&o&&e[n]&&Array.isArray(e[n])&&e[n].push(o)});let t="Applied filters: ",n=[];e.location.length>0&&n.push(`üìç ${e.location.join(", ")}`),e.experience.length>0&&n.push(`üíº ${e.experience.join(", ")}`),e.salaryRange&&n.push(`üí∞ ${document.getElementById("salaryRange").options[document.getElementById("salaryRange").selectedIndex].text}`),e.postedDate&&n.push(`üìÖ ${document.getElementById("postedDate").options[document.getElementById("postedDate").selectedIndex].text}`),n.length>0?this.showNotification(`‚úÖ ${t}${n.join(" | ")}`,"success"):this.showNotification("‚ÑπÔ∏è No filters selected","info");const o=document.getElementById("advancedFilters"),i=document.querySelector(".filter-toggle");o&&i&&(o.classList.remove("active"),i.innerHTML='<i class="fas fa-filter"></i> Advanced Filters')},initModals(){const e=document.getElementById("modal");e.addEventListener("click",t=>{t.target===e&&this.hideModal()}),document.addEventListener("keydown",t=>{"Escape"===t.key&&this.hideModal()})},showModal(e){const t=document.getElementById("modal"),n=document.getElementById("modalBody");t.classList.add("active"),document.body.style.overflow="hidden",setTimeout(()=>{const e=n.querySelector("input, select");e&&e.focus()},100)},hideModal(){const e=document.getElementById("modal");e.classList.remove("active"),document.body.style.overflow="",document.getElementById("modalBody").innerHTML=""},showForgotPassword(){this.hideModal(),setTimeout(()=>this.showModal("forgot"),300)},submitLogin(){const e=document.getElementById("loginEmail")?.value,t=document.getElementById("loginPassword")?.value;if(!e||!t)return void this.showNotification("Please fill in all fields","error");const n=document.querySelector("#modalBody .btn-primary"),o=n.innerHTML;n.innerHTML='<div class="loading"></div>',n.disabled=!0,setTimeout(()=>{this.hideModal(),this.showNotification("‚úÖ Login successful! Welcome back.","success"),n.innerHTML=o,n.disabled=!1,this.updateUserUI({name:"User Name",email:e,role:"job_seeker"})},1500)},submitSignup(){const e=document.getElementById("signupName")?.value,t=document.getElementById("signupEmail")?.value,n=document.getElementById("signupPassword")?.value,o=document.getElementById("userType")?.value;if(!e||!t||!n||!o)return void this.showNotification("Please fill in all fields","error");if(n.length<8)return void this.showNotification("Password must be at least 8 characters","error");const i=document.querySelector("#modalBody .btn-primary"),c=i.innerHTML;i.innerHTML='<div class="loading"></div>',i.disabled=!0,setTimeout(()=>{this.hideModal(),this.showNotification("üéâ Account created successfully! Check your email for verification.","success"),i.innerHTML=c,i.disabled=!1},1500)},submitForgotPassword(){const e=document.getElementById("forgotEmail")?.value;if(!e)return void this.showNotification("Please enter your email address","error");const t=document.querySelector("#modalBody .btn-primary"),n=t.innerHTML;t.innerHTML='<div class="loading"></div>',t.disabled=!0,setTimeout(()=>{this.hideModal(),this.showNotification("üìß Password reset link sent to your email.","success"),t.innerHTML=n,t.disabled=!1},1500)},checkPasswordStrength(e){let t=0,n="Very Weak",o="#e74c3c";e.length>=8&&t++,/[A-Z]/.test(e)&&t++,/[a-z]/.test(e)&&t++,/[0-9]/.test(e)&&t++,/[^A-Za-z0-9]/.test(e)&&t++;switch(t){case 0:case 1:n="Very Weak",o="#e74c3c";break;case 2:n="Weak",o="#e67e22";break;case 3:n="Good",o="#f1c40f";break;case 4:n="Strong",o="#2ecc71";break;case 5:n="Very Strong",o="#27ae60"}return{text:n,color:o}},updateUserUI(e){const t=document.getElementById("navButtons");t&&e.name&&(t.innerHTML=`<div class="user-menu" style="display: flex; align-items: center; gap: 10px;"><button class="btn btn-outline" onclick="ZewedJobs.showUserMenu()"><i class="fas fa-user"></i> ${e.name.split(" ")[0]}</button></div>`)},showUserMenu(){this.showNotification("User menu would open here","info")},initSearch(){const e=document.getElementById("searchInput");e&&(e.addEventListener("keypress",t=>{"Enter"===t.key&&this.searchJobs()}),e.addEventListener("input",()=>{clearTimeout(this.debounceTimer),e.value.length>=2&&(this.debounceTimer=setTimeout(()=>this.showSearchSuggestions(e.value),300))}));const t=e?.nextElementSibling;t&&t.addEventListener("click",()=>this.searchJobs())},searchJobs(){const e=document.getElementById("searchInput")?.value?.trim();if(!e)return void this.showNotification("Please enter a search term","warning");this.showNotification(`üîç Searching for: "${e}"...`,"info");const t=document.querySelector(".search-box button");if(t){const e=t.innerHTML;t.innerHTML='<div class="loading"></div>',t.disabled=!0,setTimeout(()=>{t.innerHTML=e,t.disabled=!1},800)}},searchTag(e){const t=document.getElementById("searchInput");t&&(t.value=e,this.searchJobs())},showSearchSuggestions(e){console.log("Search suggestions for:",e)},async loadFeaturedJobs(){try{const e=[{id:1,title:"Data Analyst",company:"Commercial Bank of Ethiopia",location:"Addis Ababa",salary:"ETB 35,000 - 45,000",type:"Full-time",experience:"2-4 years",icon:"üìä"},{id:2,title:"Nurse",company:"St. Paul Hospital",location:"Addis Ababa",salary:"ETB 18,000 - 25,000",type:"Full-time",experience:"1-3 years",icon:"üè•"},{id:3,title:"Civil Engineer",company:"Ethiopian Construction Works",location:"Addis Ababa",salary:"ETB 40,000 - 55,000",type:"Contract",experience:"3-5 years",icon:"üèóÔ∏è"}],t=document.getElementById("featuredJobs");t&&(t.innerHTML=e.map(e=>`<div class="job-card" onclick="ZewedJobs.viewJob(${e.id})"><div class="job-card-header"><div class="job-card-icon">${e.icon}</div><div><h3 class="job-card-title">${e.title}</h3><p class="job-card-company">${e.company}</p></div></div><div class="job-card-meta"><span><i class="fas fa-map-marker-alt"></i> ${e.location}</span><span><i class="fas fa-clock"></i> ${e.type}</span><span><i class="fas fa-user-tie"></i> ${e.experience}</span></div><div class="job-card-salary">${e.salary}</div></div>`).join(""))}catch(e){console.error("Error loading featured jobs:",e)}},async loadJobCategories(){try{const e=[{name:"Technology",count:1245,icon:"üíª"},{name:"Healthcare",count:876,icon:"üè•"},{name:"Finance",count:654,icon:"üí∞"},{name:"Education",count:543,icon:"üéì"},{name:"Marketing",count:432,icon:"üì¢"},{name:"Engineering",count:321,icon:"üîß"}],t=document.getElementById("jobCategories");t&&(t.innerHTML=e.map(e=>`<div class="category-card" onclick="ZewedJobs.searchTag('${e.name}')"><div class="category-icon">${e.icon}</div><div class="category-content"><h4>${e.name}</h4><p>${e.count.toLocaleString()} jobs</p></div></div>`).join(""))}catch(e){console.error("Error loading categories:",e)}},async loadTrendingSearches(){try{const e=["Software Developer","Data Analyst","Project Manager","Nurse","Accountant","Digital Marketing","Civil Engineer","Teacher"],t=document.getElementById("trendingSearches");t&&(t.innerHTML=e.map(e=>`<button class="trending-tag" onclick="ZewedJobs.searchTag('${e}')"><i class="fas fa-hashtag"></i> ${e}</button>`).join(""))}catch(e){console.error("Error loading trending searches:",e)}},applyOpportunity(e){this.showNotification(`‚úÖ Application submitted for: ${e}`,"success")},enrollCourse(e){this.showNotification(`üéì Enrolled in: ${e}`,"success")},selectPlan(e){"Enterprise"===e?this.showNotification(`üìû Contacting sales team for ${e} plan...`,"info"):this.showNotification(`‚úÖ Selected plan: ${e}`,"success")},followSocial(e){const t={telegram:"https://t.me/zewedjobs",facebook:"https://facebook.com/zewedjobs",linkedin:"https://linkedin.com/company/zewedjobs",youtube:"https://youtube.com/zewedjobs"};this.showNotification(`üì± Opening ${e}...`,"info")},registerEvent(e){this.showNotification(`üé´ Registering for: ${e}`,"success")},readNews(e){this.showNotification(`üì∞ Opening article: ${e}`,"info")},selectPayment(e){const t={telebirr:"Telebirr",cbe:"CBE Birr",hellocash:"HelloCash",amole:"Amole"};this.showNotification(`üí∞ Selected payment: ${t[e]}`,"success")},copyTeleBirr(e){e.stopPropagation();const t="+251924858244";navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(t).then(()=>{this.showNotification("üì± Telebirr number copied to clipboard!","success")}).catch(()=>{this.copyToClipboardFallback(t)}):this.copyToClipboardFallback(t)},copyToClipboardFallback(e){const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select();try{document.execCommand("copy"),this.showNotification("üì± Telebirr number copied to clipboard!","success")}catch(e){this.showNotification("‚ùå Failed to copy. Please copy manually: "+t,"error")}document.body.removeChild(t)},viewJob(e){this.showNotification(`üîç Viewing job details for ID: ${e}`,"info")},showPrivacyPolicy(){this.showModal("privacy")},showTerms(){this.showModal("terms")},showCookiePolicy(){this.showModal("cookies")},checkAuthStatus(){const e=localStorage.getItem("zewedjobs-user");if(e)try{const t=JSON.parse(e);this.updateUserUI(t)}catch(e){console.error("Error parsing user data:",e)}},showNotification(e,t="info"){document.querySelectorAll(".notification").forEach(e=>e.remove());const n=document.createElement("div");n.className=`notification ${t}`,n.innerHTML=`<div class="notification-icon">${this.getNotificationIcon(t)}</div><div style="flex: 1;">${e}</div><button class="notification-close" onclick="this.parentElement.remove()"><i class="fas fa-times"></i></button>`,document.body.appendChild(n),setTimeout(()=>{n.parentElement&&(n.style.animation="slideInRight 0.3s ease reverse forwards",setTimeout(()=>n.remove(),300))},5e3)},getNotificationIcon(e){const t={success:"‚úÖ",error:"‚ùå",warning:"‚ö†Ô∏è",info:"‚ÑπÔ∏è"};return t[e]||"‚ÑπÔ∏è"}};return document.addEventListener("DOMContentLoaded",()=>{e.init()}),e})();window.showModal=e=>ZewedJobs.showModal(e),window.hideModal=()=>ZewedJobs.hideModal(),window.searchJobs=()=>ZewedJobs.searchJobs(),window.searchTag=e=>ZewedJobs.searchTag(e),window.toggleAdvancedFilters=()=>{const e=document.querySelector(".filter-toggle");e&&e.click()},window.applyFilters=()=>ZewedJobs.applyFilters(),window.applyOpportunity=e=>ZewedJobs.applyOpportunity(e),window.enrollCourse=e=>ZewedJobs.enrollCourse(e),window.selectPlan=e=>ZewedJobs.selectPlan(e),window.followSocial=e=>ZewedJobs.followSocial(e),window.registerEvent=e=>ZewedJobs.registerEvent(e),window.readNews=e=>ZewedJobs.readNews(e),window.selectPayment=e=>ZewedJobs.selectPayment(e),window.copyTeleBirr=e=>ZewedJobs.copyTeleBirr(e),window.showPrivacyPolicy=()=>ZewedJobs.showPrivacyPolicy(),window.showTerms=()=>ZewedJobs.showTerms(),window.showCookiePolicy=()=>ZewedJobs.showCookiePolicy(),window.ZewedJobs=ZewedJobs;
